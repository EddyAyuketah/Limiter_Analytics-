import { MultiPageApp,MultiPageAppProps,IntelHeader,ReportBuilderPropsHeader } from "@intc/ReportBuilder"
import "@intc/dlux-bootstrap/dist/css/dlux.css"; //dlux css
import "bootstrap/dist/js/bootstrap.bundle.js"; //needed for dlux
import "react-bootstrap-typeahead/css/Typeahead.css"; // needed fortypehead clickers
import "tabulator-tables/dist/css/tabulator.min.css"; //needed for tabulator
import "@intc/ReportBuilder/dist/ReportBuilderStandard.css"; //ReportBuilder css override
import { Routes, Route } from "react-router-dom";


function App() {
  
  const x:MultiPageAppProps = {
    defaultPage: "Priorities",
    pages: {
        Priorities: {
            pageConfig: {
                pageName: "Priorities",
                datasets: {
                    PRIORITIES: {
                        type: "manuallyAddData",
                        data:[{X:1}],
                        
                    },
                },
                visuals: {
                   
                    prioTable: {
                        dataset: "PRIORITIES",
                        visualName: "prioTable",
                        type: "IntelTabulator",
                        position: {
                            position: "absolute",
                            top: "0%",
                            left: "0%",
                            width: "100%",
                            height: "100%",
                            borderRadius: "10px"
                        },
                        style: {
                            height: "100%",
                            boxShadow: "3px 3px 5px 6px #ccc"
                        },
                        component: {
                            subComponentUrl: "./getPotsSubComponent/PRIORITY_HISTORY",
                            socketConnection: {
                                url: "wss://pots.intel.com/mqtt",
                                lockCell: false,
                                socketKey: "CEID"
                            },
                            clickEvents: [
                                { type: "expandRow", column: "CEID" },
                                { type: "expandRow", column: "PROBLEM_STATEMENT" },
                                { type: "expandRow", column: "USER_COMMENTS" }
                            ],
                            rowUpdate: {
                                allowDelete: true,
                                allowNewRow: true,
                                unEditableOnInsert: ["CEID", "TASKFORCE", "SHIFT_GOAL"],
                                unEditableOnUpdate: ["PROCESS_NODE", "CEID", "SHIFT_GOAL"],
                                onRowDelete: {
                                    jsonBody: ["CEID", "PROCESS_NODE", "$httpCookie.potsUser"],
                                    action: "POST",
                                    url: "/api/v3/pots/dbo/spPriorityDelete",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                },
                                onNewRowSave: {
                                    jsonBody: ["ORDER_VALUE", "CEID", "PROCESS_NODE", "USER_COMMENTS", "PROBLEM_STATEMENT", "SHIFT_GOAL", "TASKFORCE", "$httpCookie.potsUser", "ABA_LIMITER"],
                                    action: "POST",
                                    url: "/api/v3/pots/dbo/spPriorityInsertNew",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                },
                                onRowUpdate: {
                                    jsonBody: ["ORDER_VALUE", "CEID", "PROCESS_NODE", "SHIFT_GOAL", "TASKFORCE", "USER_COMMENTS", "PROBLEM_STATEMENT", "AFTER_CLASS", "$httpCookie.potsUser", "ABA_LIMITER"],
                                    action: "POST",
                                    url: "/api/v3/pots/dbo/spPriorityModify",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                },
                                newRowDefaultValues: {
                                    ORDER_VALUE: "0",
                                    PROCESS_NODE: "1274",
                                    PROBLEM_STATEMENT: "Original Rev Cap date/time:",
                                    USER_COMMENTS: "Current CAP: __\nRoads Cap ETU __\nScheduled PM: __\nUnscheduled events: __\nCurrent Shift Staffing: __"
                                }
                            },
                            editMode: "row",
                            columns: [
                                {
                                    dataField: "ORDER_VALUE",
                                    caption: "Sort",
                                    width: "50px",
                                    allowEditing: true,
                                    editor: "number",
                                    fixed: true
                                },
                                {
                                    dataField: "CEID",
                                    width: "75px",
                                    fixed: true,
                                    allowEditing: true,
                                    cellStyle: {
                                        background: '"$data.row.ABA_LIMITER" === "ABA Limiter Add" ? "yellow" : ""'
                                    }
                                },
                                {
                                    dataField: "PROCESS_NODE",
                                    caption: "Node",
                                    width: "65px"
                                },
                                {
                                    dataField: "AREA",
                                    caption: "Area",
                                    width: "50px"
                                },
                                {
                                    dataField: "FE_BE",
                                    caption: "FE BE",
                                    width: "60px"
                                },
                                {
                                    dataField: "UP",
                                    width: "65px"
                                },
                                {
                                    dataField: "DOWN",
                                    width: "65px"
                                },
                                {
                                    dataField: "AREQ_GOAL",
                                    caption: "Areq Goal",
                                    width: "60px"
                                },
                                {
                                    dataField: "INV_GOAL",
                                    caption: "Inv Goal",
                                    width: "50px"
                                },
                                {
                                    dataField: "INV",
                                    caption: "Inv",
                                    width: "50px",
                                    cellStyle: {
                                        background: ';$data.row.INV > $data.row.INV_GOAL  ? "tomato" : "rgb(255,230,153)"'
                                    }
                                },
                                {
                                    dataField: "INV_IP",
                                    caption: "Inv IP",
                                    width: "50px"
                                },
                                {
                                    dataField: "INV_INC_12HR",
                                    caption: "Inc Inv 12",
                                    width: "50px"
                                },
                                {
                                    dataField: "DRUM_BEAT",
                                    caption: "DB",
                                    width: "60px"
                                },
                                {
                                    dataField: "CS_PACE",
                                    caption: "CS Pace",
                                    width: "60px",
                                    cellStyle: {
                                        background: ';$data.row.CS_PACE < $data.row.DRUM_BEAT  ? "tomato" : "rgb(147,208,123)"'
                                    }
                                },
                                {
                                    dataField: "CS_OUTS",
                                    caption: "CS Outs",
                                    width: "50px"
                                },
                                {
                                    dataField: "PS_OUTS",
                                    caption: "PS Outs",
                                    width: "60px"
                                },
                                {
                                    dataField: "CS_WSPW_PACE",
                                    caption: "CS WSPW Pace",
                                    width: "60px",
                                    cellStyle: {
                                        background: "tomato"
                                    }
                                },
                                {
                                    dataField: "CW_WSPW_PACE",
                                    caption: "CW WSPW Pace",
                                    width: "60px"
                                },
                                {
                                    dataField: "REV_CAP",
                                    caption: "REV CAP",
                                    width: "60px"
                                },
                                {
                                    dataField: "SHIFT_GOAL_WSPW",
                                    caption: "Shift Output Goal WSPW",
                                    width: "60px",
                                    allowEditing: false
                                },
                                {
                                    dataField: "SHIFT_GOAL",
                                    caption: "Shift Output Goal",
                                    width: "60px",
                                    allowEditing: true
                                },
                                {
                                    dataField: "AFTER_CLASS",
                                    caption: "After Class",
                                    width: "60px",
                                    allowEditing: true,
                                    toggle: "toggleSwitch"
                                },
                                {
                                    dataField: "TASKFORCE",
                                    caption: "Task Force",
                                    width: "60px",
                                    allowEditing: true,
                                    editorOptionsList: ["L1", "L2", "L3"]
                                },
                                {
                                    dataField: "ABA_LIMITER",
                                    caption: "ABA Classification",
                                    width: "80px",
                                    allowEditing: true,
                                    editorOptionsList: ["Limiter", "Not Limiter", "Recovery", "Watch"]
                                },
                                {
                                    dataField: "PROBLEM_STATEMENT",
                                    caption: "Problem Statement",
                                    editCookie: "ryan",
                                    width: "250px",
                                    multiLineRender: false,
                                    allowEditing: true
                                },
                                {
                                    dataField: "USER_COMMENTS",
                                    caption: "Comments - Right Click on this cell for options to expand and collapse.",
                                    allowEditing: true,
                                    multiLineRender: false,
                                    width: "500px",
                                    headerContextOptions: {
                                        toggleAllCollapseExpand: true,
                                        toggleAllRowExpand: true
                                    }
                                }
                            ],
                            quickSearch: true,
                            quickFilter: true,
                            showRowNumber: true
                        }
                    },
                   
                },
                style: {
                    overflow: "auto"
                },
                clickers: [
                    {
                        type: "clicker",
                        visualName: "aba_clicker",
                        component: {
                            type: "dropdown",
                            multiSelect: true,
                            dataset: "PRIORITIES",
                            datasetColumm: "ABA_LIMITER",
                            displayText: "ABA Classification",
                            linkedDatasets: [
                                {
                                    dataset: "PRIORITIES",
                                    column: "ABA_LIMITER"
                                }
                            ]
                        }
                    },
                    {
                        type: "clicker",
                        visualName: "after_class_clicker",
                        component: {
                            type: "dropdown",
                            multiSelect: true,
                            dataset: "PRIORITIES",
                            datasetColumm: "FLAG_AFTER_CLASS",
                            displayText: "After Class",
                            linkedDatasets: [
                                {
                                    dataset: "PRIORITIES",
                                    column: "FLAG_AFTER_CLASS"
                                }
                            ]
                        }
                    },
                    {
                        type: "clicker",
                        visualName: "area_clicker",
                        component: {
                            type: "dropdown",
                            multiSelect: true,
                            dataset: "PRIORITIES",
                            datasetColumm: "AREA",
                            displayText: "Area",
                            linkedDatasets: [
                                {
                                    dataset: "PRIORITIES",
                                    column: "AREA"
                                }
                            ]
                        }
                    },
                    {
                        type: "clicker",
                        visualName: "ceid_clicker",
                        component: {
                            type: "dropdown",
                            multiSelect: true,
                            dataset: "PRIORITIES",
                            datasetColumm: "CEID",
                            displayText: "CEID",
                            linkedDatasets: [
                                {
                                    dataset: "PRIORITIES",
                                    column: "CEID"
                                }
                            ]
                        }
                    },
                ]
            },
            pageOrder: 1
        },
        Priorities1: {
          pageConfig: {
              pageName: "Priorities1",
              datasets: {
                  PRIORITIES: {
                      type: "manuallyAddData",
                      data:[{X:1}],
                      
                  },
              },
              visuals: {
                  prioTable: {
                      dataset: "PRIORITIES",
                      visualName: "prioTable",
                      type: "IntelTabulator",
                      position: {
                          position: "absolute",
                          top: "0%",
                          left: "0%",
                          width: "100%",
                          height: "100%",
                          borderRadius: "10px"
                      },
                      style: {
                          height: "100%",
                          boxShadow: "3px 3px 5px 6px #ccc"
                      },
                      component: {
                          subComponentUrl: "./getPotsSubComponent/PRIORITY_HISTORY",
                          socketConnection: {
                              url: "wss://pots.intel.com/mqtt",
                              lockCell: false,
                              socketKey: "CEID"
                          },
                          clickEvents: [
                              { type: "expandRow", column: "CEID" },
                              { type: "expandRow", column: "PROBLEM_STATEMENT" },
                              { type: "expandRow", column: "USER_COMMENTS" }
                          ],
                          rowUpdate: {
                              allowDelete: true,
                              allowNewRow: true,
                              unEditableOnInsert: ["CEID", "TASKFORCE", "SHIFT_GOAL"],
                              unEditableOnUpdate: ["PROCESS_NODE", "CEID", "SHIFT_GOAL"],
                              onRowDelete: {
                                  jsonBody: ["CEID", "PROCESS_NODE", "$httpCookie.potsUser"],
                                  action: "POST",
                                  url: "/api/v3/pots/dbo/spPriorityDelete",
                                  headers: {
                                      "Content-Type": "application/json"
                                  }
                              },
                              onNewRowSave: {
                                  jsonBody: ["ORDER_VALUE", "CEID", "PROCESS_NODE", "USER_COMMENTS", "PROBLEM_STATEMENT", "SHIFT_GOAL", "TASKFORCE", "$httpCookie.potsUser", "ABA_LIMITER"],
                                  action: "POST",
                                  url: "/api/v3/pots/dbo/spPriorityInsertNew",
                                  headers: {
                                      "Content-Type": "application/json"
                                  }
                              },
                              onRowUpdate: {
                                  jsonBody: ["ORDER_VALUE", "CEID", "PROCESS_NODE", "SHIFT_GOAL", "TASKFORCE", "USER_COMMENTS", "PROBLEM_STATEMENT", "AFTER_CLASS", "$httpCookie.potsUser", "ABA_LIMITER"],
                                  action: "POST",
                                  url: "/api/v3/pots/dbo/spPriorityModify",
                                  headers: {
                                      "Content-Type": "application/json"
                                  }
                              },
                              newRowDefaultValues: {
                                  ORDER_VALUE: "0",
                                  PROCESS_NODE: "1274",
                                  PROBLEM_STATEMENT: "Original Rev Cap date/time:",
                                  USER_COMMENTS: "Current CAP: __\nRoads Cap ETU __\nScheduled PM: __\nUnscheduled events: __\nCurrent Shift Staffing: __"
                              }
                          },
                          editMode: "row",
                          columns: [
                              {
                                  dataField: "ORDER_VALUE",
                                  caption: "Sort",
                                  width: "50px",
                                  allowEditing: true,
                                  editor: "number",
                                  fixed: true
                              },
                              {
                                  dataField: "CEID",
                                  width: "75px",
                                  fixed: true,
                                  allowEditing: true,
                                  cellStyle: {
                                      background: '"$data.row.ABA_LIMITER" === "ABA Limiter Add" ? "yellow" : ""'
                                  }
                              },
                              {
                                  dataField: "PROCESS_NODE",
                                  caption: "Node",
                                  width: "65px"
                              },
                              {
                                  dataField: "AREA",
                                  caption: "Area",
                                  width: "50px"
                              },
                              {
                                  dataField: "FE_BE",
                                  caption: "FE BE",
                                  width: "60px"
                              },
                              {
                                  dataField: "UP",
                                  width: "65px"
                              },
                              {
                                  dataField: "DOWN",
                                  width: "65px"
                              },
                              {
                                  dataField: "AREQ_GOAL",
                                  caption: "Areq Goal",
                                  width: "60px"
                              },
                              {
                                  dataField: "INV_GOAL",
                                  caption: "Inv Goal",
                                  width: "50px"
                              },
                              {
                                  dataField: "INV",
                                  caption: "Inv",
                                  width: "50px",
                                  cellStyle: {
                                      background: ';$data.row.INV > $data.row.INV_GOAL  ? "tomato" : "rgb(255,230,153)"'
                                  }
                              },
                              {
                                  dataField: "INV_IP",
                                  caption: "Inv IP",
                                  width: "50px"
                              },
                              {
                                  dataField: "INV_INC_12HR",
                                  caption: "Inc Inv 12",
                                  width: "50px"
                              },
                              {
                                  dataField: "DRUM_BEAT",
                                  caption: "DB",
                                  width: "60px"
                              },
                              {
                                  dataField: "CS_PACE",
                                  caption: "CS Pace",
                                  width: "60px",
                                  cellStyle: {
                                      background: ';$data.row.CS_PACE < $data.row.DRUM_BEAT  ? "tomato" : "rgb(147,208,123)"'
                                  }
                              },
                              {
                                  dataField: "CS_OUTS",
                                  caption: "CS Outs",
                                  width: "50px"
                              },
                              {
                                  dataField: "PS_OUTS",
                                  caption: "PS Outs",
                                  width: "60px"
                              },
                              {
                                  dataField: "CS_WSPW_PACE",
                                  caption: "CS WSPW Pace",
                                  width: "60px",
                                  cellStyle: {
                                      background: "tomato"
                                  }
                              },
                              {
                                  dataField: "CW_WSPW_PACE",
                                  caption: "CW WSPW Pace",
                                  width: "60px"
                              },
                              {
                                  dataField: "REV_CAP",
                                  caption: "REV CAP",
                                  width: "60px"
                              },
                              {
                                  dataField: "SHIFT_GOAL_WSPW",
                                  caption: "Shift Output Goal WSPW",
                                  width: "60px",
                                  allowEditing: false
                              },
                              {
                                  dataField: "SHIFT_GOAL",
                                  caption: "Shift Output Goal",
                                  width: "60px",
                                  allowEditing: true
                              },
                              {
                                  dataField: "AFTER_CLASS",
                                  caption: "After Class",
                                  width: "60px",
                                  allowEditing: true,
                                  toggle: "toggleSwitch"
                              },
                              {
                                  dataField: "TASKFORCE",
                                  caption: "Task Force",
                                  width: "60px",
                                  allowEditing: true,
                                  editorOptionsList: ["L1", "L2", "L3"]
                              },
                              {
                                  dataField: "ABA_LIMITER",
                                  caption: "ABA Classification",
                                  width: "80px",
                                  allowEditing: true,
                                  editorOptionsList: ["Limiter", "Not Limiter", "Recovery", "Watch"]
                              },
                              {
                                  dataField: "PROBLEM_STATEMENT",
                                  caption: "Problem Statement",
                                  editCookie: "ryan",
                                  width: "250px",
                                  multiLineRender: false,
                                  allowEditing: true
                              },
                              {
                                  dataField: "USER_COMMENTS",
                                  caption: "Comments - Right Click on this cell for options to expand and collapse.",
                                  allowEditing: true,
                                  multiLineRender: false,
                                  width: "500px",
                                  headerContextOptions: {
                                      toggleAllCollapseExpand: true,
                                      toggleAllRowExpand: true
                                  }
                              }
                          ],
                          quickSearch: true,
                          quickFilter: true,
                          showRowNumber: true
                      }
                  },
                 
              },
              style: {
                  overflow: "auto"
              },
              clickers: [
                  {
                      type: "clicker",
                      visualName: "aba_clicker",
                      component: {
                          type: "dropdown",
                          multiSelect: true,
                          dataset: "PRIORITIES",
                          datasetColumm: "ABA_LIMITER",
                          displayText: "ABA Classification",
                          linkedDatasets: [
                              {
                                  dataset: "PRIORITIES",
                                  column: "ABA_LIMITER"
                              }
                          ]
                      }
                  },
                  {
                      type: "clicker",
                      visualName: "after_class_clicker",
                      component: {
                          type: "dropdown",
                          multiSelect: true,
                          dataset: "PRIORITIES",
                          datasetColumm: "FLAG_AFTER_CLASS",
                          displayText: "After Class",
                          linkedDatasets: [
                              {
                                  dataset: "PRIORITIES",
                                  column: "FLAG_AFTER_CLASS"
                              }
                          ]
                      }
                  },
                  {
                      type: "clicker",
                      visualName: "area_clicker",
                      component: {
                          type: "dropdown",
                          multiSelect: true,
                          dataset: "PRIORITIES",
                          datasetColumm: "AREA",
                          displayText: "Area",
                          linkedDatasets: [
                              {
                                  dataset: "PRIORITIES",
                                  column: "AREA"
                              }
                          ]
                      }
                  },
                  {
                      type: "clicker",
                      visualName: "ceid_clicker",
                      component: {
                          type: "dropdown",
                          multiSelect: true,
                          dataset: "PRIORITIES",
                          datasetColumm: "CEID",
                          displayText: "CEID",
                          linkedDatasets: [
                              {
                                  dataset: "PRIORITIES",
                                  column: "CEID"
                              }
                          ]
                      }
                  },
              ]
          },
          pageOrder: 1
      }
    },
 
  }
  const header:ReportBuilderPropsHeader = {
    visualName:'header',
    position:{
        position: "absolute",
        top: "0px",
        left: "0%",
        width: "100%",
        height: "50px"
    },
    type:'header',
    component:{
        iconName:'LogoClassicBlueFull',
        reportName:'TEST',
        dropDownLinks:{
            1:{
               text:'reports',
                links:{
                    1:{
                        type:'link',
                        link:'https://pots.intel.com',
                        text:'POTS',
                        title:'POTS'
                    },
                    2:{
                        type:'link',
                        link:'https://pots.intel.com',
                        text:'POTS',
                        title:'POTS'
                    },

                },
                title:'Reports',
                type:'dropdown',
            }
        }
    }

  }

  return (
    <>
    <IntelHeader    visualRow={header} />

    <Routes>
       
      <Route 
        key = {'/'}
        path="/" 
        element={<MultiPageApp pageConfig={x} />}
        
      
        />
    <Route path="/*" element={<div>Waiting For Configurations</div>} />
  </Routes>
  </>
  )
}

export default App
